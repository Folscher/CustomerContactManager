@{
    ViewBag.Title = "CustomerCreate";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Create New Customer</h2>

<br />

<div class="container">
    
    <br />
    
    <div class="row">
        <div class="form-group">
            <label class="control-label col-lg-2">Name</label>
            <div class="col-md-10">
                <div class="col-lg-3">
                    <input class="text-box single-line" id="inName" placeholder="Customer Name" type="text" />
                    @*<span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>*@
                </div>
            </div>
        </div>
    </div>

    <br />

    <div class="row">
        <div class="form-group">
            <label class="control-label col-lg-2">Latitude</label>
            <div class="col-md-10">
                <div class="col-lg-3">
                    <input class="text-box single-line" id="inLatitudeDegrees" placeholder="Degrees" type="number" />
                    <span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>
                </div>
                <div class="col-lg-3">
                    <input class="text-box single-line" id="inLatitudeMinutes" placeholder="Minutes" type="number" />
                    @*<span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>*@
                </div>
                <div class="col-lg-3">
                    <input class="text-box single-line" id="inLatitudeSeconds" placeholder="Seconds" type="number" />
                    @*<span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>*@
                </div>
            </div>
        </div>
    </div>

    <br />

    <div class="row">
        <div class="form-group">
            <label class="control-label col-md-2">Longitude</label>
            <div class="col-md-10">
                <div class="col-lg-3">
                    <input class="text-box single-line" id="inLongitudeDegrees" placeholder="Degrees" type="number" />
                    @*<span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>*@
                </div>
                <div class="col-lg-3">
                    <input class="text-box single-line" id="inLongitudeMinutes" placeholder="Minutes" type="number" />
                    @*<span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>*@
                </div>
                <div class="col-lg-3">
                    <input class="text-box single-line" id="inLongitudeSeconds" placeholder="Seconds" type="number" />
                    @*<span class="field-validation-valid" data-valmsg-for="Address" data-valmsg-replace="true"></span>*@
                </div>
            </div>
        </div>
    </div>

    <br />

    <div class="row">
        <div class="col-lg-3 col-xs-3">
            <button id="btnCreate">Create Customer</button>
        </div>
    </div>

</div>

<script>
    var json;

    var URLItems = window.location.pathname.split('/');
    var CustID = URLItems[3];
    var APIUrl = 'http://localhost:64881/api/customerAPI/';
    var ClientUrl = 'http://localhost:64881/';
    var ContactURL = 'CustomerContact/CustomerContact/';

    $('#btnCreate').click(function () {
        
        var Name = $('#inName').val();
        var Latitude = $('#inLatitudeDegrees').val() + ',' + $('#inLatitudeMinutes').val() + ',' + $('#inLatitudeSeconds').val();
        var Longitude = $('#inLongitudeDegrees').val() + ',' + $('#inLongitudeMinutes').val() + ',' + $('#inLongitudeSeconds').val();
        var Customer = {Name: Name, Latitude: Latitude, Longitude: Longitude};

        console.log(Customer);

        $.ajax({
            url: APIUrl,
            type: 'POST',
            data: Customer,
            success: function (result) {
                alert('Customer Created');
                window.location.replace(ClientUrl);
            },
            error: function (result) {
                alert('Fail');
                window.location.replace(ClientUrl);
            }
        });
        //});
    });

</script>


